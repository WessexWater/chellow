{% extends "base.html" %}

{% block title %}
	&raquo; DNOs &raquo; {{llfc.dno.dno_code}} &raquo; 
	LLFCs &raquo; {{llfc.code}} {{llfc.valid_from|hh_format}} &raquo; Edit
{% endblock %}

{% block nav %}
	<a href="/e/dnos">DNOs</a> &raquo; 
	<a href="/e/dnos/{{llfc.dno.id}}">{{llfc.dno.dno_code}}</a> &raquo; 
	<a href="/e/llfcs?dno_id={{llfc.dno.id}}">LLFCs</a> &raquo;
	<a
			href="/e/llfcs/{{llfc.id}}"
			>{{llfc.code}} {{llfc.valid_from|hh_format}}</a> &raquo;
	Edit
{% endblock %}

{% block content %}
	{% if request.method == 'GET' and request.values.delete %}

		<form method="post" action="/llfcs/{{llfc.id}}/edit">
			<fieldset>
				<legend>Are you sure you want to delete this LLFC?</legend>	
				<input type="submit" name="delete" value="Delete">
				<a href="/llfcs/{{llfc.id}}/edit">Cancel</a>
			</fieldset>
		</form>

	{% else %}
	
		<form action="/llfcs/{{llfc.id}}/edit" method="post">
			<fieldset>
				<legend>Update LLFC</legend>	
				<label>Description</label>
				{{input_text('description', llfc.description, 40)}}<br>
				<label>Voltage Level</label>
				<select name="voltage_level_id">
					{% for voltage_level in voltage_levels %}
						{{input_option(
							'voltage_level_id', voltage_level.id,
							voltage_level.code, llfc.voltage_level.id)}}
					{% endfor %}
				</select>
				<label>
					Substation?
					{{input_checkbox('is_substation', llfc.is_substation)}}
				</label>
				<label>
					Import?
					{{input_checkbox('is_import', llfc.is_import)}}
				</label>
				<fieldset>
					<legend>Valid From</legend>
					{{input_date('valid_from', llfc.valid_from)}}
				</fieldset>
				<fieldset>
					<legend>Valid to</legend>
					<label>
						Ended?
						{{ input_checkbox('has_finished', llfc.valid_to != None)}}
					</label>
					{{input_date('valid_to', llfc.valid_to)}}
				</fieldset>
				<input type="submit" value="Update">
			</fieldset>
		</form>

		<form>
			<fieldset>
				<legend>Delete this LLFC</legend>	
				<input type="submit" name="delete" value="Delete">
			</fieldset>
		</form>

	{% endif %}

{% endblock %}
